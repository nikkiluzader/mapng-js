<div align="center">

# MapNG

**High-Performance Terrain Generator for BeamNG.drive Modding**

[![Vue 3](https://img.shields.io/badge/Vue-3.x-42b883?style=flat-square&logo=vue.js)](https://vuejs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.x-3178c6?style=flat-square&logo=typescript)](https://www.typescriptlang.org/)
[![Three.js](https://img.shields.io/badge/Three.js-r160+-black?style=flat-square&logo=three.js)](https://threejs.org/)
[![Tailwind CSS](https://img.shields.io/badge/Tailwind-3.x-38bdf8?style=flat-square&logo=tailwindcss)](https://tailwindcss.com/)
</div>

---

## üìñ Overview

**MapNG** is a specialized web application designed to streamline the creation of real-world terrain maps for **BeamNG.drive**. It allows modders to select any location on Earth, visualize it in 3D, and export high-precision heightmaps and detailed textures ready for game engine import.

Unlike generic terrain tools, MapNG focuses on the specific needs of vehicle simulation maps: high-resolution height data, accurate scale, and integrated road network textures.

## ‚ú® Key Features

- **üåç Global Coverage**: Access terrain data for anywhere on Earth using AWS Terrain Tiles.
- **üèîÔ∏è Multiple Elevation Sources**:
  - **Standard**: Global ~30m resolution (AWS Terrarium). Upsampled to 1m/px using bilinear interpolation for smooth surfaces.
  - **USGS 1m**: High-precision 1-meter DEMs for USA (CONUS, Alaska, Hawaii).
  - **GPXZ**: Premium high-resolution global elevation data (requires API key).
- **üìè Consistent 1m/px Output**: All heightmaps are generated at exactly 1 meter per pixel resolution, regardless of the source data. This ensures consistent scaling in game engines.
- **üó∫Ô∏è Precision Selection**: Interactive 2D map for precise area selection.
- **üé® Advanced Texture Generation**:
  - **Satellite**: High-res satellite imagery.
  - **OSM "Blueprint"**: 8K resolution vector-based texture showing roads, buildings, and vegetation with standard Carto/OSB styling.
  - **Hybrid**: Composite texture overlaying OSM roads and buildings onto satellite imagery.
- **üèîÔ∏è 3D Preview**: Real-time 3D visualization of the terrain with switchable texture modes (Satellite, OSM, Hybrid).
- **üíæ Export Options**:
  - **Heightmap**: 16-bit PNG (Grayscale) for maximum elevation precision.
  - **Textures**: 8192px PNGs for OSM and Hybrid modes, JPG for Satellite.
  - **3D Model**: GLB export of the terrain mesh.
  - **Vector Data**: GeoJSON export of OSM features.

## üõ†Ô∏è Tech Stack

- **Frontend Framework**: Vue 3 (Composition API) + Vite
- **Language**: TypeScript
- **Styling**: Tailwind CSS
- **3D Engine**: Three.js / TresJS / Cientos
- **Mapping**: Leaflet / Vue-Leaflet
- **Core Processing**:
  - **HTML5 Canvas API**: High-performance 8K texture generation.
  - `fast-png`: 16-bit image encoding.
  - `geotiff` & `proj4`: USGS DEM parsing and reprojection.

## üöÄ Getting Started

### Prerequisites

- **Node.js** (v16 or higher)
- **npm** (v8 or higher)

### Installation

1. **Clone the repository**
   ```bash
   git clone https://github.com/nikkiluzader/mapng.git
   cd mapng
   ```

2. **Install dependencies**
   ```bash
   npm install
   ```

3. **Start the development server**
   ```bash
   npm run dev
   ```
   Open `http://localhost:5173` in your browser.

### Building for Production

To create a production-ready build:

```bash
npm run build
```

The output files will be in the `dist` directory.

## üìñ Usage Guide

1. **Select Location**: Use the 2D map to navigate to your desired location.
2. **Configure Settings**:
   - **Resolution**: Choose output size (up to 8192px).
   - **OSM Features**: Check "Include OSM Features" to fetch vector data for textures.
   - **Elevation Source**: Select between Standard (30m), USGS (1m USA), or GPXZ (Premium Global).
3. **Generate**:
   - Click **"Preview 3D"** to render the terrain in the browser.
   - Click **"Direct DL"** to skip rendering and prepare files for download.
4. **Export**:
   - Use the grid of export buttons to download specific assets:
     - **Heightmap**: 16-bit PNG.
     - **Satellite**: JPG texture.
     - **OSM Texture**: 8K "Blueprint" style PNG.
     - **Hybrid Texture**: 8K Satellite + Road overlay PNG.
     - **OSM Data**: Raw GeoJSON.
     - **GLB Model**: 3D mesh file.

## ‚ö†Ô∏è Disclaimer

**Data Accuracy**: All terrain data, heightmaps, and textures generated by MapNG are **estimations** based on available satellite and elevation datasets. While we strive for high precision (especially with USGS/GPXZ data), the output may not perfectly match real-world dimensions due to projection distortions, data resolution limits, and interpolation. This tool is intended for modding and creative use, not for engineering or navigation.

## üìä Data Sources

- **Elevation**: 
  - [AWS Terrain Tiles](https://registry.opendata.aws/terrain-tiles/)
  - [USGS National Map](https://tnmaccess.nationalmap.gov/api/v1/docs)
  - [GPXZ](https://gpxz.io/)
- **Imagery**: [Esri World Imagery](https://www.esri.com/en-us/arcgis/products/world-imagery)
- **Vector Data**: [OpenStreetMap](https://www.openstreetmap.org/) via Overpass API

## üìÑ License

This project is open-source and available under the [MIT License](https://mit-license.org/)

---

<div align="center">
  <p><i>Built with ‚ù§Ô∏è for the BeamNG community</i></p>
</div>
